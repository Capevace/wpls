(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{clJf:function(a,t,e){"use strict";e.r(t);var s=e("9obY"),l={props:["plugin"],methods:{openPackage:function(){this.$router.push("/packages/"+this.plugin.slug)}}},i=e("KHd+"),n={props:["visible"],data:function(){return{loading:!1,slug:"",package:""}},methods:{toggleModal:function(){this.$emit("toggle")},addPackage:function(){var a=this;this.loading=!0;var t=new FormData;t.append("package",this.package),t.append("slug",this.slug),Object(s.c)(t).then(function(t){console.log(t),a.loading=!1,a.$store.dispatch("refreshPackages"),a.$store.dispatch("pushNotification",{message:"Successfully added package.",type:"is-success",duration:2e3}),a.toggleModal()}).catch(function(t){console.log(t),a.loading=!1;var e="An unknown error occurred.";t.response.data.error&&(e=t.response.data.error.message),a.$store.dispatch("pushNotification",{message:e,type:"is-danger",duration:2e3}),a.toggleModal()})},handlePackageUpload:function(a){this.package=a.target.files[0]}}},o={data:function(){return{addModalVisible:!1,updateModalVisible:!1,updateModalPackage:null}},computed:{plugins:function(){return this.$store.state.plugins}},components:{plugin:Object(i.a)(l,function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"notification",staticStyle:{cursor:"pointer"},on:{click:a.openPackage}},[e("div",{staticClass:"level"},[e("div",{staticClass:"level-left"},[e("div",{staticClass:"level-item"},[e("h5",{staticClass:"title is-5"},[a._v(a._s(a.plugin.name)+" ("+a._s(a.plugin.version)+")")])]),a._v(" "),e("div",{staticClass:"level-item"},[e("h6",{staticClass:"subtitle is-6"},[a._v(a._s(a.plugin.slug))])])]),a._v(" "),e("div",{staticClass:"level-right"},[e("div",{staticClass:"level-item"},[e("button",{staticClass:"button is-inverted is-small",on:{click:a.openPackage}},[a._v("View Package")])])])])])},[],!1,null,null,null).exports,"add-package-modal":Object(i.a)(n,function(){var a=this,t=a.$createElement,e=a._self._c||t;return a.visible?e("div",{class:{modal:!0,"is-active":a.visible}},[e("div",{staticClass:"modal-background",on:{click:a.toggleModal}}),a._v(" "),e("div",{staticClass:"modal-content"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-content"},[e("div",{staticClass:"content"},[e("h2",[a._v("Add new Package")]),a._v(" "),e("form",{on:{submit:function(t){return t.preventDefault(),a.addPackage(t)}}},[e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[a._v("Package Slug")]),a._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:a.slug,expression:"slug"}],staticClass:"input",attrs:{type:"text",placeholder:"e.g. my-plugin-slug",required:"",disabled:a.loading},domProps:{value:a.slug},on:{input:function(t){t.target.composing||(a.slug=t.target.value)}}})]),a._v(" "),e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[a._v("Package .zip File")]),a._v(" "),e("div",{staticClass:"file has-name"},[e("label",{staticClass:"file-label"},[e("input",{staticClass:"file-input",attrs:{type:"file",disabled:a.loading,accept:".zip",required:""},on:{change:a.handlePackageUpload}}),a._v(" "),a._m(0),a._v(" "),e("span",{staticClass:"file-name"},[a._v("\n                                            "+a._s(a.package.name?a.package.name:"No file selected")+"\n                                        ")])])])]),a._v(" "),e("div",{staticClass:"level"},[e("div",{staticClass:"level-left"}),a._v(" "),e("div",{staticClass:"level-right"},[e("div",{staticClass:"level-item"},[e("button",{class:{"button is-info":!0,"is-loading":a.loading},attrs:{type:"submit",disabled:a.loading}},[a._v("Add Package")])])])])])])])])]),a._v(" "),e("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:a.toggleModal}})]):a._e()},[function(){var a=this.$createElement,t=this._self._c||a;return t("span",{staticClass:"file-cta"},[t("span",{staticClass:"file-icon"},[t("i",{staticClass:"fas fa-upload"})]),this._v(" "),t("span",{staticClass:"file-label"},[this._v("\n                                                Choose a .zip fileâ€¦\n                                            ")])])}],!1,null,null,null).exports},methods:{toggleAddModal:function(){this.addModalVisible=!this.addModalVisible},toggleUpdateModal:function(){this.updateModalVisible=!this.updateModalVisible,this.updateModalPackage=null},updatePackage:function(a){this.updateModalVisible=!0,this.updateModalPackage=a}}},c=Object(i.a)(o,function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("wpls-page",{attrs:{title:"Packages"}},[e("template",{slot:"level-right"},[e("div",{staticClass:"level-item"},[e("a",{staticClass:"button is-info",on:{click:a.toggleAddModal}},[a._v("Add New Package")])])]),a._v(" "),a._l(a.plugins,function(t){return e("plugin",{key:t.id,attrs:{plugin:t},on:{updatePackage:a.updatePackage}})}),a._v(" "),e("add-package-modal",{attrs:{visible:a.addModalVisible},on:{toggle:a.toggleAddModal}})],2)},[],!1,null,null,null);t.default=c.exports}}]);